* EmacsのリポジトリサイトMELPAへのアップロード準備(開発者向け)
** melpaをフォークする
   [[git@github.com:yuutayamada/melpa.git][ここから]]
** melpaをクローンする
   $ git clone git@github.com:yuutayamada/melpa.git
** レシピを作成する
   ./melpa/recipes/の中に以下のlogalimacsファイルを作り以下の様に行を追加
   (logalimacs :repo "logaling/logalimacs" :fetcher github)
** ./buildpkgを実行する
   package.elが入っている必要がある(emacs24)
   実行すると以下のようなファイルが作成されるか確認する、
   ./working/logalimacs以下にパッケージが作成されるのを確認
   ./packages/logalimacs-20120608.tarなどのtarファイルが作成される
** 問題なければレシピをcommit,pushする
** MELPAの人(purcell)さんにpull requestする
** マージされたら行う事
*** Emacs24でダウンロードできるか確認する
    M-x list-package
    logalimacsにカーソルを合わせて "i"
    次に"x"を押すとインストールするか聞いてくるので
    yesにしてインストール
    指定のディレクトリに作成されたか確認

* EmacsユーザーがMELPAを利用する場合の準備
** Emacs23ユーザーはpackage.elが必要なので先に準備する(Emacs24は標準添付)
   2012/6/8 パッケージをダウンロードできる事を確認(emacs-version: emacs23.2.1)
   Emacs23用と24用があるので注意してください。
*** Emacs23用にpackage.elをダウンロード
    $ cd your-download-directory
    $ wget http://repo.or.cz/w/emacs.git/blob_plain/1a0a666f941c99882093d7bd08ced15033bc3f0c:/lisp/emacs-lisp/package.el

*** Emacsにpackage.el用の設定を追加

    ~/.emacs.d/init.elなどに以下の設定を追加する
------------------------------------------------------------------
    ;; ~/.emacs.d/elisp/package.elがある場合の設定
    (load "~/.emacs.d/elisp/package")

    ;; または以下の様に~/.emacs.d/elisp/以下にロードパスを通して
    (add-to-list 'load-path "~/.emacs.d/elisp")
    ;; 後でrequire packageをする
    (require 'package)
------------------------------------------------------------------

    これで M-x list-package でリポジトリに登録したサイトの
    elispを表示できます。
    そのあと"i"で入れたいpackageのマーク,"x"でインストールの実行になります
** MELPAのリポジトリを登録する

   ~/.emacs.d/init.elなどに以下の設定を追加する
------------------------------------------------------------------
   ;;リポジトリにMELPAを追加
   (add-to-list 'package-archives ("melpa" . "http://melpa.milkbox.net/packages/"))
   お好み設定:
   ;;インストールするディレクトリを指定
   (setq package-user-dir "インストールされるディレクトリ")
   ;;インストールしたパッケージにロードパスを通してロードする
   (package-initialize)
------------------------------------------------------------------

* 作成の注意点
** ファイルフォーマット
   (info "(elisp) Packaging")によって指定した様なpackage.elの書式に定める
   詳細は[[http://marmalade-repo.org/doc-files/package.5.html][ここを]]参照(marmaledeの書式なのでそのままで良い?)
** レシピは極力小さくしてほしい
   パッケージに関連するファイルだけ指定する事によって
   結果のレシピは極力小さくしてほしい,
   パッケージファイルを指定する為の
   更なる情報は[[https://github.com/milkypostman/melpa#package-format][パッケージフォーマットを参照]]
** パッケージ名は提供された機能の名前にマッチしまければいけない
   詳細はpackage関数を参照
